## Браузерное тестирование <!-- {docsify-ignore} -->

### Selenium локаторы

Сложность: **средняя**

<!--Автор: @igor.lyubin @ivan.zyunov-->

#### Задача:

Переведите xpath локатор в css:

```xpath
//A/B[2]
```

Переведите css локатор в xpath:

```css
a#x b[m*=text]
```

#### Ответ:

<details><summary>Решение</summary>
<p>

```
A > B:nth-of-type(2)
```

```xpath
//a[@id="x"]//b[contains(@m, "text")]
```

</p>
</details>

#### Дополнительные вопросы:

Q: *Какие ты знаешь локаторы? Отсортируй локаторы по скорости поиска.*

A:

<details><summary>Решение</summary>
<p>

```
- id
- name
- className
- tagName
- linkText
- partialLinkText
- cssSelector
- xPath
```

</p>
</details>

Q: *Что означает `#` в css?*

A: id

Q: *Что означает `.` в css?*

A: class

______________________________________________________________________

### XPath оси

Сложность: **средняя**

<!--Автор: @rogordeev-->

#### Задача:

Что такое оси в XPath, зачем они могут понадобиться?

#### Ответ:

XPath оси - ключевые слова, которые позволяют найти элементы относительно выбранного. Используются в случае, когда локатор не может однозначно определить элемент, и нам дополнительно нужны элементы выше/ниже по дереву.

Q: *Как можно подниматься вверх по дереву?*

A: Только с помощью осей xpath.
\- `..` - подняться на уровень вверх
\- `ancestor::` - найти предка

Q: *Что вернет локатор `//h3[contains(text(), "Создать заявку")]/following-sibling::p`*

A: Вернет абзацы (p), которые находятся на том же уровне, что и h3 заголовок

______________________________________________________________________

### Cookies

Сложность: **средняя**

<!--Автор: @rogordeev-->

#### Задача:

Что такое Cookie, зачем они нужны?

#### Ответ:

Cookie – это сравнительно небольшого размера данные; In common сервер передает их на клиент в хедере Set-Cookie, и которые затем хранятся на клиенте и передаются обратно на сервер в каждом запросе в хедере Cookie. Они нужны для хранения state на клиенте - авторизации, настроек и т.п.

Q: *Можно ли редактировать Cookie?*

A: В большинстве браузеров это можно делать в инструментах разработика (DevTool или аналогах)

Q: *Можно ли передать Cookie в Postman/curl?*

A: да, это ещё один header

Q: *Какие поля в Cookie, в том числе связанные с безопасностью её данных?*

A:

- SameSite - Strict/Lax/None
- Expires
- Path и Domain
- HttpOnly - Cookie не может быть прочитано/изменено в JS

______________________________________________________________________

### Developer Tools

Сложность: **средняя**

<!--Автор: @mikhail.vonogradov-->

#### Задача:

Консоль разработчика в браузере, что интересного во вкладках Elements, Console, Network?

#### Ответ:

- Elements - загруженная HTML, и все объекты на ней с их xPath
- Console - клиентское логирование, ошибки и предупреждения, отладочная инфа
- Network - обмен со страницей, запросы, ответы, таймлайн

______________________________________________________________________

### Chrome DevTools Protocol

Сложность: **средняя**

<!--Автор: @rogordeev-->

#### Задача:

Что такое CDP?

#### Ответ:

Протокол управления и интроспекции Blink-based браузеров - Chrome, Chromuim etc., его используют и утилиты DevTools.

Q: *Какой протокол передачи данных (wire) использует CDP?*

A: WebSocket

______________________________________________________________________

### WebDriver

Сложность: **высокая**

<!--Автор: @rogordeev-->

#### Задача:

Что такое WebDriver и зачем он нужен?

#### Ответ:

WebDriver это стандартизованный, не зависящий от языка программирования или ОС W3C протокол, который описывает команды и интерфейсы управления браузерами, и команды интроспекции и управления web-страницами.

#### Дополнительные вопросы:

Q: *Должны ли разрабочики браузера поддерживать этот протокол?*

A: Только если они хотят, чтобы их браузер был W3C-compliant; поддержка W3C необязательна.

Q: *Назовите примеры приложений, где реализована поддержка WebDriver*

A: Спецификация протокола взята изначально из Selenium WebDriver. Протокол поддержан частично в Selenium 3 (начиная с 3.8), Selenium 4 начиная с alpha W3C compliant. Также поддержан в Chromedriver - standalone утилите, которая может управлять Chrome на Android или десктопных платформах и в geckodriver для Firefox (Gecko-based браузеров).

Q: *Какой протокол передачи данных (wire) использует WebDriver?*

A: HTTP

______________________________________________________________________

### Выбор тестового фреймворка

Сложность: **средняя**

<!--Автор: @rogordeev-->

#### Задача:

Представьте, что вам для нового проекта поручили выбрать тестовый фреймворк для тестирования в браузере, какими бы вы руководствовались критериями? На новом проекте есть команда QA и разработки, но без особых предпочтений в фреймворках.

#### Ответ:

Кандидат должен быть не только адвокатом любимого фреймворка, а подумать о поддержке кода в течение нескольких лет, о том, что тесты пишет не один человек.

- Возьму *<frameworkname>*, потому что я на нём умею писать и на проекте за N времени появятся тесты
- Поддержка браузеров
  - Поддержка WebDriver/CDP
- Удобная отладка, интерактивная
- Запуск тестов
  - возможность параллелизации запуска тестов из-коробки
  - выборочный запуск тестов пофайлово/отдельных тестов/ретраи/теги
- Активное комьюнити
  - есть ли такие специалисты на рынке труда
- Плагины
- Тот же язык, что и основной проект
- Сравнительно высокая скорость выполнения тестов
- Наличие boilerplate проектов

______________________________________________________________________

### Capabilities

Сложность: **низкая**

<!--Автор: @rogordeev-->

#### Задача:

Что такое browser capabilities?

#### Ответ:

Сервис, запускающий браузеры (локальный хост/Selenium Grid, Moon), может поддерживать разные браузеры и разные их версии, также может запускать их с различными настройками (пустой профиль, режим без окна и т.п.). Capabilities это конфигурации таких запусков.

Q: *Что запустит этот конфиг?*

```
capabilities: {
    maxInstances: 10,
    browserName: 'chrome',
    browserVersion: "91.0",
    'moon:options': {
        screenResolution: '1440x900',
    },
    'goog:chromeOptions': {
        args: ['headless', 'incognito', 'disable-notifications', 'disable-extensions', 'disable-infobars'],
    },
}
```

A: Chrome 91.0, в инкогнито-режиме, с выключенными напоминаниями/расширениями

______________________________________________________________________

### Практики flaky тестов

Сложность: **средняя**

<!--Автор: @rogordeev-->

#### Задача:

Про какие практики борьбы с flaky-тестами можете рассказать?

#### Ответ:

Кандидат должен не только писать тесты, но и поддерживать их, нужно, чтобы он мог продемонстрировать это. Он может рассказать про свой опыт и практики, или назвать что-то из списка ниже:

- предварительно убедиться в стабильности самого теста сделав N десятков прогонов
- декомпозировать сами тесты - например, уменьшить количество переходов по страницам
- нужен сервис с репортами, где собирается статистика прогонов
- тесты можно помечать как flaky автоматически
- тесты нужно выполнять в произвольном порядке

______________________________________________________________________
